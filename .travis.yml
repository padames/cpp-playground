matrix:
  include:
    - os: osx
#      osx_image: xcode8
      env:
        - MATRIX_EVAL="CC=gcc-4.9 && CXX=g++-4.9"
    
    - os: linux
      dist: bionic

before_install:
    - eval "${MATRIX_EVAL}"

# Need these for a more recent CMake on Linux
#sudo: required
#dist: bionic


language: cpp

before_script:
  - cd watched
  - mkdir build
  - cd build
  - cmake ..

script:
  - cmake --build .

after_script:
  - cmake --build . --target watched_test

# This section installs the necessary dependencies.
#addons:
#  apt:
#    packages:
#    - g++
#    - clang
#    update: true
#  homebrew:
#    packages:
#   - ccache
#    - gcc@4.8
#   - llvm@4
#   update: true
